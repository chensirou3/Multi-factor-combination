# OOS æµ‹è¯•çŠ¶æ€æŠ¥å‘Š

## ðŸ“Š å½“å‰çŠ¶æ€

**æµ‹è¯•å¯åŠ¨æ—¶é—´**: 2025-11-19  
**æµ‹è¯•æ¨¡å¼**: Score Mode OOS Validation  
**æœåŠ¡å™¨**: ubuntu@49.51.244.154  

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### 1. çŽ¯å¢ƒå‡†å¤‡
- âœ… OOS æ¡†æž¶ä»£ç å·²éƒ¨ç½²åˆ°æœåŠ¡å™¨
- âœ… æ•°æ®å¯ç”¨æ€§æ£€æŸ¥å®Œæˆ
- âœ… é…ç½®æ–‡ä»¶å·²æ›´æ–°ä»¥åŒ¹é…å®žé™…æ•°æ®èŒƒå›´

### 2. ä»£ç ä¿®å¤
- âœ… æ·»åŠ  `load_merged_4h_data()` å‡½æ•°åˆ° `src/joint_data/loader.py`
- âœ… æ·»åŠ  `build_joint_score_signals()` ä¾¿æ·å‡½æ•°åˆ° `src/joint_factors/joint_signals.py`
- âœ… ä¿®å¤ `subset_df_by_date()` æ—¶åŒºå¤„ç†é—®é¢˜

### 3. é…ç½®è°ƒæ•´
- âœ… æ›´æ–° `config/oos_splits.yaml` ä»¥åŒ¹é…å®žé™…æ•°æ®èŒƒå›´
- âœ… BTCUSD å·²æ³¨é‡Šï¼ˆæ•°æ®ä¸è¶³ï¼Œä»…åˆ° 2020-12-31ï¼‰
- âœ… å…¶ä»–å“ç§é…ç½®å·²éªŒè¯

## ðŸ”„ æ­£åœ¨è¿è¡Œçš„æµ‹è¯•

### å½“å‰ä»»åŠ¡
```bash
nohup python3 scripts/run_score_oos_all.py > results/logs/oos_all.log 2>&1 &
```

### æµ‹è¯•å“ç§ (4ä¸ª)
1. **ETHUSD** âœ… å·²å®Œæˆ
   - æ•°æ®èŒƒå›´: 2017-12-11 to 2025-10-08
   - è®­ç»ƒé›†: 2017-12-11 to 2020-12-31 (3å¹´)
   - æµ‹è¯•é›†: 2021-01-01 to 2025-10-08 (5å¹´)
   
2. **XAUUSD** ðŸ”„ è¿›è¡Œä¸­
   - æ•°æ®èŒƒå›´: 2010-01-01 to 2025-10-09
   - è®­ç»ƒé›†: 2010-01-01 to 2018-12-31 (9å¹´)
   - æµ‹è¯•é›†: 2019-01-01 to 2025-10-09 (7å¹´)
   
3. **XAGUSD** â³ å¾…å¤„ç†
   - æ•°æ®èŒƒå›´: 2010-01-01 to 2025-10-10
   - è®­ç»ƒé›†: 2010-01-01 to 2018-12-31 (9å¹´)
   - æµ‹è¯•é›†: 2019-01-01 to 2025-10-10 (7å¹´)
   
4. **EURUSD** â³ å¾…å¤„ç†
   - æ•°æ®èŒƒå›´: 2010-01-01 to 2025-10-03
   - è®­ç»ƒé›†: 2010-01-01 to 2018-12-31 (9å¹´)
   - æµ‹è¯•é›†: 2019-01-01 to 2025-10-03 (7å¹´)

## ðŸ“ˆ åˆæ­¥ç»“æžœ (ETHUSD)

### è®­ç»ƒé›†è¡¨çŽ°
- æœ€å¤§ Sharpe: **2.644**
- å¹³å‡ Sharpe: -0.102
- æ€»é…ç½®æ•°: 1,224

### æµ‹è¯•é›†è¡¨çŽ°
- æœ€å¤§ Sharpe: **0.064**
- å¹³å‡ Sharpe: 0.064
- æ­£ Sharpe æ¯”ä¾‹: **100%**
- æµ‹è¯•é…ç½®æ•°: 1

### æ ¸å¿ƒç»„åˆ (w_manip=0.6, w_ofi=-0.3)
- è®­ç»ƒé›†æœ€ä½³ Sharpe: **0.968**
- è®­ç»ƒé›†å¹³å‡ Sharpe: 0.202
- æµ‹è¯•é›†æœ€ä½³ Sharpe: **0.370**
- æµ‹è¯•é›†å¹³å‡ Sharpe: -0.197
- æµ‹è¯•é›†æ­£ Sharpe æ¯”ä¾‹: 2.8%

### åˆæ­¥è§‚å¯Ÿ
- âš ï¸ æµ‹è¯•é›† Sharpe æ˜¾è‘—ä½ŽäºŽè®­ç»ƒé›†ï¼ˆè¿‡æ‹Ÿåˆè¿¹è±¡ï¼‰
- âœ… æ ¸å¿ƒç»„åˆåœ¨æµ‹è¯•é›†ä¸Šä»ä¿æŒæ­£ Sharpe (0.370)
- âš ï¸ åªæœ‰ 1 ä¸ªé…ç½®é€šè¿‡äº†å‚æ•°é€‰æ‹©ï¼ˆå¯èƒ½é€‰æ‹©æ ‡å‡†è¿‡ä¸¥ï¼‰

## ðŸ” ç›‘æŽ§è¿›åº¦

### æ–¹æ³• 1: ä½¿ç”¨ç›‘æŽ§è„šæœ¬

```powershell
# Windows PowerShell
.\scripts\monitor_oos_progress.ps1
```

```bash
# Linux/Mac
./scripts/monitor_oos_progress.sh
```

### æ–¹æ³• 2: ç›´æŽ¥æŸ¥çœ‹æ—¥å¿—

```bash
ssh -i mishi/lianxi.pem ubuntu@49.51.244.154 "tail -f /home/ubuntu/manip-ofi-joint-analysis/results/logs/oos_all.log"
```

### æ–¹æ³• 3: æ£€æŸ¥è¿›ç¨‹

```bash
ssh -i mishi/lianxi.pem ubuntu@49.51.244.154 "ps aux | grep run_score_oos_all.py"
```

## ðŸ“¥ ä¸‹è½½ç»“æžœ

æµ‹è¯•å®ŒæˆåŽï¼Œè¿è¡Œï¼š

```powershell
# Windows
.\scripts\download_oos_results.ps1
```

```bash
# Linux/Mac
./scripts/download_oos_results.sh
```

## ðŸ“Š é¢„æœŸè¾“å‡ºæ–‡ä»¶

### æ¯ä¸ªå“ç§
- `score_oos_train_{SYMBOL}_4H.csv` - è®­ç»ƒé›†æ‰€æœ‰é…ç½®ç»“æžœ
- `score_oos_test_{SYMBOL}_4H.csv` - æµ‹è¯•é›†é€‰å®šé…ç½®ç»“æžœ
- `score_oos_core_combo_{SYMBOL}_4H.csv` - æ ¸å¿ƒç»„åˆ (0.6, -0.3) è·Ÿè¸ª

### æ±‡æ€»æ–‡ä»¶
- `score_oos_summary_per_symbol.csv` - å„å“ç§æ±‡æ€»
- `score_oos_summary_overall.csv` - æ€»ä½“æ±‡æ€»

## â±ï¸ é¢„è®¡å®Œæˆæ—¶é—´

- **å•ä¸ªå“ç§**: çº¦ 5-10 åˆ†é’Ÿ
- **æ‰€æœ‰å“ç§ (4ä¸ª)**: çº¦ 20-40 åˆ†é’Ÿ

å½“å‰è¿›åº¦å¯é€šè¿‡ç›‘æŽ§è„šæœ¬æŸ¥çœ‹ã€‚

## ðŸŽ¯ ä¸‹ä¸€æ­¥

æµ‹è¯•å®ŒæˆåŽï¼š

1. **ä¸‹è½½ç»“æžœ**: ä½¿ç”¨ `download_oos_results.ps1`
2. **ç”Ÿæˆåˆ†æžæŠ¥å‘Š**: è¿è¡Œ `python scripts/summarize_oos_results.py`
3. **è¯„ä¼°ç­–ç•¥ç¨³å¥æ€§**: 
   - æ£€æŸ¥æµ‹è¯•é›† Sharpe åˆ†å¸ƒ
   - åˆ†æžå‚æ•°é«˜åŽŸç¨³å®šæ€§
   - éªŒè¯æ ¸å¿ƒç»„åˆè¡¨çŽ°
4. **å†³ç­–**:
   - å¦‚æžœæµ‹è¯•é›† Sharpe > 0.3 ä¸”ç¨³å®š: ç­–ç•¥å¯é 
   - å¦‚æžœ Sharpe è¡°å‡ > 0.5: è€ƒè™‘ç®€åŒ–æ¨¡åž‹
   - å¦‚æžœæµ‹è¯•é›† Sharpe < 0: é‡æ–°å®¡è§†ç­–ç•¥é€»è¾‘

---

**æœ€åŽæ›´æ–°**: 2025-11-19  
**çŠ¶æ€**: ðŸ”„ æµ‹è¯•è¿›è¡Œä¸­

